import { Callout } from "nextra-theme-docs";

# Configuration du dossier du patient

Le dossier du patient est l'une des parties les plus configurables d'O3. Vous pouvez personnaliser la navigation, les flux de travail des visites, la gestion des rencontres et divers widgets du dossier du patient via la configuration.

## Configuration de la navigation du dossier du patient

Vous pouvez personnaliser la navigation du dossier du patient en ajoutant des extensions aux emplacements d'extension. L'approche la plus courante consiste √† ajouter des groupes de navigation √† l'emplacement `patient-chart-dashboard-slot`.

### Ajout de groupes de navigation

Les groupes de navigation vous permettent d'organiser les tableaux de bord et les pages connexes en sections repliables. Vous pouvez ajouter plusieurs groupes de navigation pour organiser la navigation de votre dossier du patient :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "extensionSlots": {
      "patient-chart-dashboard-slot": {
        "add": ["nav-group#HIVAdultReturn", "nav-group#NCDOutpatient"],
        "configure": {
          "nav-group#HIVAdultReturn": {
            "title": "Retour du VIH chez l'adulte",
            "slotName": "hiv-nav-group-slot"
          },
          "nav-group#NCDOutpatient": {
            "title": "NCD Outpatient",
            "slotName": "heart-nav-group-slot"
          }
        }
      }
    }
  }
}
```

Chaque groupe de navigation n√©cessite :
- Un identifiant unique (en utilisant le suffixe `#`, par exemple `nav-group#HIVAdultReturn`)
- Un `title` qui sera affich√© dans la navigation
- Un `slotName` qui d√©finit l'emplacement d'extension o√π les tableaux de bord de ce groupe seront rendus

## Configuration des flux de travail des visites

### Restriction des lieux de visite

Par d√©faut, les utilisateurs peuvent s√©lectionner n'importe quel lieu lors du d√©marrage d'une visite. Vous pouvez restreindre le s√©lecteur de lieu pour n'afficher que les lieux avec le tag "Visit Location" :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "restrictByVisitLocationTag": true
  }
}
```

**Note** : Cela n√©cessite que le module EMR API soit install√©. Si le module n'est pas install√© et que cette option est activ√©e, un avertissement sera affich√©.

### Affichage des rendez-vous √† venir

Vous pouvez afficher les rendez-vous √† venir dans le formulaire de d√©marrage de visite :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "showUpcomingAppointments": true
  }
}
```

Cela n√©cessite que le module `@openmrs/esm-appointments-app` soit install√©.

### Affichage des types de visite recommand√©s

Si vous utilisez des programmes, vous pouvez afficher un onglet avec les types de visite recommand√©s bas√©s sur l'inscription du patient au programme :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "showRecommendedVisitTypeTab": true,
    "visitTypeResourceUrl": "/etl-latest/etl/patient/"
  }
}
```

Le `visitTypeResourceUrl` sp√©cifie l'URL de point de terminaison personnalis√©e pour charger les ressources n√©cessaires √† l'affichage des types de visite recommand√©s. La valeur par d√©faut est `/etl-latest/etl/patient/`.

### Affichage de l'onglet Toutes les rencontres

Par d√©faut, la section Visites du patient affiche √† la fois un onglet "R√©sum√© de la visite" et un onglet "Toutes les rencontres". Vous pouvez masquer l'onglet "Toutes les rencontres" :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "showAllEncountersTab": false
  }
}
```

La valeur par d√©faut est `true`.

### D√©sactivation des onglets vides

Vous pouvez masquer les onglets (notes, tests, m√©dicaments, rencontres) lorsqu'ils sont vides :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "disableEmptyTabs": true
  }
}
```

### Configuration des types d'attributs de visite

Vous pouvez configurer quels types d'attributs de visite sont affich√©s lors du remplissage du formulaire de visite, et s'ils sont requis ou affich√©s dans la banni√®re du patient :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "visitAttributeTypes": [
      {
        "uuid": "57ea0cbb-064f-4d09-8cf4-e8228700491c",
        "required": false,
        "displayInThePatientBanner": true
      },
      {
        "uuid": "aac48226-d143-4274-80e0-264db4e368ee",
        "required": true,
        "displayInThePatientBanner": false
      }
    ]
  }
}
```

Chaque configuration de type d'attribut de visite comprend :
- `uuid` - L'UUID du type d'attribut de visite (requis)
- `required` - Si le champ est requis dans le formulaire de visite (par d√©faut : `false`)
- `displayInThePatientBanner` - S'il faut afficher la valeur de cet attribut dans la banni√®re du patient (par d√©faut : `true`)

## Configuration de la gestion des rencontres

### Dur√©e d'√©dition des rencontres

Vous pouvez configurer combien de temps apr√®s la cr√©ation une rencontre reste √©ditable :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "encounterEditableDuration": 30
  }
}
```

La valeur est sp√©cifi√©e en minutes. Une valeur de `0` (la valeur par d√©faut) signifie que les rencontres sont √©ditables ind√©finiment. Par exemple, d√©finir `30` signifie que les rencontres ne peuvent √™tre modifi√©es que dans les 30 minutes suivant leur cr√©ation.

### Privil√®ges de substitution pour l'√©dition des rencontres

Vous pouvez sp√©cifier des privil√®ges qui permettent aux utilisateurs de modifier les rencontres m√™me apr√®s l'expiration de la dur√©e d'√©dition :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "encounterEditableDuration": 30,
    "encounterEditableDurationOverridePrivileges": [
      "Edit Encounters",
      "Manage Encounters"
    ]
  }
}
```

Les utilisateurs avec l'un des privil√®ges sp√©cifi√©s peuvent modifier les rencontres ind√©pendamment du param√®tre `encounterEditableDuration`.

### Masquage des observations du r√©sum√© des rencontres

Vous pouvez masquer des observations sp√©cifiques de l'affichage dans le tableau de r√©sum√© des rencontres :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "obsConceptUuidsToHide": [
      "some-concept-uuid-to-hide-1",
      "some-concept-uuid-to-hide-2"
    ]
  }
}
```

Toute observation avec un UUID de concept correspondant √† l'un de ceux de ce tableau sera filtr√©e de la liste des observations dans le tableau de r√©sum√© des rencontres.

### Configuration des concepts de notes

Vous pouvez configurer quels UUIDs de concepts doivent √™tre trait√©s comme "notes" dans le r√©sum√© de visite :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "notesConceptUuids": [
      "162169AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
      "another-notes-concept-uuid"
    ]
  }
}
```

La valeur par d√©faut inclut le concept de note g√©n√©rale du patient (`162169AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA`). Les observations avec ces UUIDs de concepts seront affich√©es dans la section des notes de visite.

### Exiger une visite active pour la tuile de rencontre

Par d√©faut, la tuile de rencontre n√©cessite une visite active. Vous pouvez d√©sactiver cette exigence :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "requireActiveVisitForEncounterTile": false
  }
}
```

La valeur par d√©faut est `true`.

## Configuration du formulaire des signes vitaux et des donn√©es biom√©triques

### Utilisation d'un formulaire personnalis√©

Dans certains cas, vous pouvez vouloir utiliser un formulaire sp√©cifique (par exemple, un formulaire d'√©valuation de triage existant) pour remplacer le formulaire structur√© de l'application Vital Signs pr√™te √† l'emploi. Vous pouvez configurer l'application des signes vitaux pour utiliser un formulaire construit avec le moteur de formulaires :

```json
{
  "@openmrs/esm-patient-vitals-app": {
    "vitals": {
      "useFormEngine": true,
      "formName": "Op√©ration chirurgicale",
      "formUuid": "96637f12-3c04-311f-b477-3fa6a866e895",
      "encounterTypeUuid": "67a71486-1a54-468f-ac3e-7091a9a79584"
    }
  }
}
```

**Propri√©t√©s requises lorsque `useFormEngine` est `true`** :
- `formUuid` - L'UUID du formulaire √† utiliser
- `encounterTypeUuid` - L'UUID du type de rencontre pour les rencontres de signes vitaux
- `formName` - Un nom d'affichage pour le formulaire (optionnel, par d√©faut : "Vitals")

Pour plus d'informations sur la configuration des formulaires dans O3, consultez la documentation [Formulaires dans O3](/docs/forms-in-o3).

### Seuil de retard des signes vitaux

Vous pouvez configurer combien d'heures doivent s'√©couler avant que les signes vitaux ne soient consid√©r√©s comme en retard :

```json
{
  "@openmrs/esm-patient-vitals-app": {
    "vitals": {
      "vitalsOverdueThresholdHours": 24
    }
  }
}
```

La valeur par d√©faut est `12` heures.

### Affichage du bouton d'impression

Vous pouvez activer un bouton d'impression dans l'en-t√™te du tableau de donn√©es des signes vitaux :

```json
{
  "@openmrs/esm-patient-vitals-app": {
    "vitals": {
      "showPrintButton": true
    }
  }
}
```

### Codes de couleur MUAC

Pour les mesures de circonf√©rence m√©diane du bras (MUAC), vous pouvez activer le codage couleur pour afficher le statut nutritionnel :

```json
{
  "@openmrs/esm-patient-vitals-app": {
    "vitals": {
      "useMuacColors": true
    }
  }
}
```

Lorsqu'il est activ√©, le champ de saisie MUAC affichera des couleurs de statut (par exemple, rouge pour la malnutrition aigu√´ s√©v√®re, jaune pour mod√©r√©e, vert pour normal).

## Configuration des tuiles de r√©sum√© clinique

Les tuiles de r√©sum√© clinique affichent des donn√©es cliniques cl√©s (comme le poids et la taille) dans un format de carte sur le dossier du patient. Vous pouvez configurer des tuiles personnalis√©es :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "tileDefinitions": [
      {
        "title": "Poids et Taille",
        "columns": [
          {
            "title": "Poids",
            "concept": "5089AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
            "encounterType": "67a71486-1a54-468f-ac3e-7091a9a79584",
            "hasSummary": true
          },
          {
            "title": "Taille",
            "concept": "5090AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
            "encounterType": "67a71486-1a54-468f-ac3e-7091a9a79584",
            "hasSummary": true
          }
        ]
      },
      {
        "title": "Tension art√©rielle",
        "columns": [
          {
            "title": "Systolique",
            "concept": "5085AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
            "encounterType": "67a71486-1a54-468f-ac3e-7091a9a79584",
            "hasSummary": false
          },
          {
            "title": "Diastolique",
            "concept": "5086AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
            "encounterType": "67a71486-1a54-468f-ac3e-7091a9a79584",
            "hasSummary": false
          }
        ]
      }
    ]
  }
}
```

**Propri√©t√©s de configuration** :
- `title` - Le titre de la tuile affich√© dans le r√©sum√© clinique
- `columns` - Un tableau de d√©finitions de colonnes, chacune avec :
  - `title` - L'en-t√™te de la colonne
  - `concept` - L'UUID du concept √† afficher
  - `encounterType` - L'UUID du type de rencontre pour filtrer les observations
  - `hasSummary` - (optionnel) S'il faut afficher une valeur de r√©sum√© (par exemple, la derni√®re valeur) dans l'en-t√™te de la tuile (par d√©faut : `false`)

## Configuration des widgets personnalis√©s

### Widget Obs-by-Encounter

Vous pouvez cr√©er des widgets personnalis√©s qui affichent les observations au fil du temps en utilisant l'extension `obs-by-encounter-widget`. Ce widget affiche les donn√©es √† la fois en format graphique et en tableau :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "extensionSlots": {
      "patient-chart-allergies-dashboard-slot": {
        "add": ["obs-by-encounter-widget#hiv", "obs-by-encounter-widget#diabetes"],
        "configure": {
          "obs-by-encounter-widget#hiv": {
            "title": "Widget VIH",
            "resultName": "HIV",
            "data": [
              {
                "concept": "1132AAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
                "label": "Sodium",
                "color": "green"
              },
              {
                "concept": "856AAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
                "label": "Charge virale",
                "color": "red"
              }
            ],
            "table": {
              "pageSize": 5
            }
          }
        }
      }
    }
  }
}
```

**Propri√©t√©s de configuration** :
- `title` - Le titre du widget affich√© dans le tableau de bord (peut √©galement √™tre une cl√© de traduction)
- `resultName` - Un identifiant de nom pour le widget, affich√© dans les messages concernant ces donn√©es
- `data` - Un tableau de configurations de concepts, chacune avec :
  - `concept` - L'UUID du concept √† afficher (requis)
  - `label` - L'√©tiquette d'affichage pour ce concept (par d√©faut, utilise le nom d'affichage du concept si non fourni)
  - `color` - La couleur de la ligne de donn√©es dans le graphique (par exemple, "green", "red", "blue", par d√©faut : "blue")
  - `graphGroup` - (optionnel) Pour afficher plusieurs concepts sur le m√™me graphique. Les concepts avec la m√™me valeur `graphGroup` seront affich√©s ensemble. La valeur `graphGroup` est utilis√©e comme √©tiquette (ou cl√© de traduction) dans le panneau de menu de la vue graphique.
  - `decimalPlaces` - (optionnel) Nombre de d√©cimales √† afficher (0-10, par d√©faut : 2)
- `table` - Configuration du tableau :
  - `pageSize` - Nombre de lignes par page (par d√©faut : 5)
- `encounterTypes` - (optionnel) Tableau d'UUIDs de types de rencontres. Si sp√©cifi√©, seules les observations de ces types de rencontres seront affich√©es (par d√©faut : tableau vide, affiche tous les types de rencontres)
- `dateFormat` - (optionnel) Comment formater les dates : `"date"`, `"time"`, ou `"dateTime"` (par d√©faut : `"dateTime"`)
- `showEncounterType` - (optionnel) S'il faut afficher la colonne du type de rencontre dans la vue tableau (par d√©faut : `false`)
- `showGraphByDefault` - (optionnel) S'il faut afficher la vue graphique par d√©faut au lieu de la vue tableau (par d√©faut : `false`)
- `graphOldestFirst` - (optionnel) S'il faut trier les valeurs du graphique du plus ancien au plus r√©cent (par d√©faut : `false`, affiche le plus r√©cent en premier)
- `interpretationSlot` - (optionnel) Nom de l'emplacement d'extension pour afficher les interpr√©tations sous le graphique. Si sp√©cifi√©, les extensions dans cet emplacement seront rendues sous la visualisation du graphique.

**Note** : La propri√©t√© `color` d√©termine la couleur de la ligne de donn√©es dans la visualisation du graphique. Choisissez des couleurs qui offrent un bon contraste et sont accessibles. Lors de l'utilisation de `graphGroup`, plusieurs concepts peuvent √™tre affich√©s sur le m√™me graphique, ce qui est utile pour les mesures connexes (par exemple, regrouper la tension art√©rielle systolique et diastolique ensemble).

## Options de configuration avanc√©es

### UUIDs de concepts pour les formulaires

Vous pouvez configurer les UUIDs de concepts utilis√©s pour les valeurs bool√©ennes et autres valeurs communes des formulaires :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "trueConceptUuid": "1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
    "falseConceptUuid": "1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
    "otherConceptUuid": "5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
    "freeTextFieldConceptUuid": "5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
    "visitDiagnosisConceptUuid": "159947AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
  }
}
```

Ceux-ci sont utilis√©s en interne par les formulaires et les vues cliniques. Les valeurs par d√©faut sont des concepts CIEL standard, vous n'avez donc g√©n√©ralement besoin de les modifier que si vous utilisez un dictionnaire de concepts personnalis√©.

### URL de l'√©tablissement par d√©faut

Si l'√©tablissement par d√©faut n'est pas disponible dans la session, vous pouvez sp√©cifier une URL personnalis√©e pour le charger :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "defaultFacilityUrl": "/openmrs/ws/rest/v1/location?tag=Login%20Location&limit=1"
  }
}
```

### Type de visite hors ligne

Vous pouvez configurer quel type de visite est utilis√© pour les visites hors ligne cr√©√©es automatiquement :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "offlineVisitTypeUuid": "a22733fa-3501-4020-a520-da024eeff088"
  }
}
```

La valeur par d√©faut est `a22733fa-3501-4020-a520-da024eeff088`.

### UUID du type de commande de m√©dicament

Vous pouvez configurer l'UUID du type de commande "Drug" utilis√© pour r√©cup√©rer les m√©dicaments :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "drugOrderTypeUUID": "131168f4-15f5-102d-96e4-000c29c2a5d7"
  }
}
```

La valeur par d√©faut est `131168f4-15f5-102d-96e4-000c29c2a5d7`.

### Logo du dossier du patient

Vous pouvez configurer un logo sp√©cifiquement pour le dossier du patient (distinct du logo de la barre de navigation) :

```json
{
  "@openmrs/esm-patient-chart-app": {
    "logo": {
      "src": "${openmrsSpaBase}/assets/patient-chart-logo.svg",
      "alt": "Logo du dossier du patient",
      "name": "Ma Clinique"
    }
  }
}
```

La configuration du logo prend en charge :
- `src` - URL ou chemin vers un fichier image (si vide, utilise par d√©faut le sprite SVG OpenMRS)
- `alt` - Texte alternatif pour l'accessibilit√©
- `name` - Texte √† afficher lorsque l'image est absente (utilis√© uniquement si `src` est vide)

## Tutoriels vid√©o

### Configuration du dossier du patient O3

<iframe
  width="560"
  height="315"
  src="https://www.youtube.com/embed/57nRWhJdf1E"
  title="Configuration du dossier du patient O3"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
  allowFullScreen
/>

### Ajout du widget Obs-by-Encounter

<iframe
  width="560"
  height="315"
  src="https://www.youtube.com/embed/Nv-9hrRC758"
  title="Ajouter le mod√®le de widget obs-by-encounter"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
  allowFullScreen
/>

<Callout emoji="üí°" type="info">
  **Avez-vous d√©velopp√© une extension configurable ?** Pensez √† r√©aliser une vid√©o similaire pour montrer comment effectuer la configuration et partagez votre vid√©o sur notre [Forum de discussion](https://talk.openmrs.org/) ! Vous cr√©erez ainsi une biblioth√®que de widgets que nous pourrons pr√©senter.
</Callout>
